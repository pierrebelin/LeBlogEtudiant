{% extends 'PierreBlogBundle::layout.html.twig' %}

{% block title %} | {{ blog.title }} by Pierre Belin{% endblock %}

{% block body %}
    {% for type, flashes in app.session.flashbag.all %}
        {% for flash in flashes %}
            <div class="alert alert-{{ type }} alert-dismissible fade in show" role="alert">
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                {{ flash }}
            </div>
        {% endfor %}
    {% endfor %}


    <article class="blog">
        <header>
            <h2><a href="{{ path('PierreBlogBundle_blog_show', { 'slug': blog.slug }) }}">{{ blog.title }}</a></h2>
            <div class="date-published">Dernière mise à jour : {{ blog.created|localizeddate('full', 'none') }} -
                par {{ blog.author }}</div>
        </header>
        <img src="{{ blog.image }}" alt="L'image n'a pas pu être chargée" class="large"/>
        <div class="textblog">
            {{ blog.blog|raw }}
        </div>
    </article>

    <section class="comments" id="comments">
        <div class="previous-comments">

            <div class="comment-written">
                <h3>Commentaires</h3>
                {% include 'PierreBlogBundle:Comment:index.html.twig' with { 'comments': comments } %}
            </div>

            <div class="comment-wrap">
                <h3>Écrivez votre avis</h3>
                <div class="write-advice">
                    <p>Votre adresse mail ne sera pas jamais affiché.</p>
                    {#% include 'PierreBlogBundle:Comment:index.html.twig' with { 'request': request, 'blog_id': blog.id } %#}
                    {{ render (controller('PierreBlogBundle:Comment:new', { 'request': request, 'blog_id': blog.id }) ) }}
                </div>
            </div>
        </div>
    </section>
{% endblock %}